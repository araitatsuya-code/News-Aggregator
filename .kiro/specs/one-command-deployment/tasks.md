# 実装計画

- [x] 1. ユーティリティスクリプトの基盤実装
  - 共通機能とヘルパー関数を実装し、後続のスクリプトで再利用できる基盤を構築する
  - 進行状況表示、時間計測、ログ出力の基本機能を提供する
  - _要件: 要件4, 要件6, 要件7_

- [x] 1.1 進行状況ロガーの実装
  - scripts/utils/progress-logger.shを作成し、ステップ進行状況の表示機能を実装する
  - カラー出力、プログレスバー、ステップ完了マークの表示機能を含める
  - _要件: 要件6.1, 要件6.2, 要件6.3_

- [x] 1.2 時間トラッカーの実装
  - scripts/utils/time-tracker.shを作成し、実行時間計測機能を実装する
  - ステップ別時間計測、総実行時間計算、時間フォーマット表示機能を含める
  - _要件: 要件4.1, 要件4.2, 要件4.3_

- [x] 1.3 仮想環境マネージャーの実装
  - scripts/utils/venv-manager.shを作成し、仮想環境の検出と有効化機能を実装する
  - venv存在確認、自動有効化、Python環境検証、依存関係チェック機能を含める
  - _要件: 要件5.1, 要件5.2, 要件5.3, 要件5.4_

- [x] 2. データ準備専用スクリプトの実装
  - 記事収集からデータコピーまでを実行するスクリプトを作成する
  - エラーハンドリングと統計情報表示機能を含める
  - _要件: 要件2_

- [x] 2.1 データ準備スクリプトの基本構造作成
  - scripts/deploy/deploy-data-only.shを作成し、コマンドライン引数解析機能を実装する
  - --verbose, --backup, --skip-validationオプションの処理を含める
  - _要件: 要件2.1, 要件2.2_

- [x] 2.2 データ収集ワークフローの実装
  - 仮想環境有効化、main.py実行、データコピーの順次実行機能を実装する
  - 各ステップのエラーハンドリングと進行状況表示を含める
  - _要件: 要件2.1, 要件2.2_

- [x] 2.3 データ統計表示機能の実装
  - 生成された記事数、カテゴリ別内訳、ソース別統計の表示機能を実装する
  - JSON解析とフォーマット済み統計出力機能を含める
  - _要件: 要件2.2_

- [x] 3. Vercelデプロイ専用スクリプトの拡張
  - 既存のdeploy-vercel.shを拡張し、データ存在確認と環境指定機能を追加する
  - 確認プロンプトとエラーハンドリングを強化する
  - _要件: 要件2, 要件3_

- [x] 3.1 データ存在確認機能の実装
  - latest.jsonファイルの存在と有効性をチェックする機能を実装する
  - データが不足している場合のエラーメッセージと対処法提示を含める
  - _要件: 要件2.4_

- [x] 3.2 環境指定とプロンプト機能の実装
  - --env preview|prodオプションの処理と本番環境への確認プロンプトを実装する
  - 無効な環境指定時のエラーハンドリングを含める
  - _要件: 要件3.1, 要件3.2, 要件3.3, 要件3.4_

- [x] 4. メインデプロイスクリプトの実装
  - 全ワークフローを統合するメインスクリプトを作成する
  - 各ステップの順次実行とエラー時の適切な処理を実装する
  - _要件: 要件1_

- [x] 4.1 メインスクリプトの基本構造作成
  - scripts/deploy/deploy-full.shを作成し、コマンドライン引数解析機能を実装する
  - --env, --skip-data, --verbose, --backupオプションの処理を含める
  - _要件: 要件1.1, 要件1.2_

- [x] 4.2 統合ワークフローの実装
  - 環境確認→データ収集→データコピー→デプロイの順次実行機能を実装する
  - 各ステップ間のデータ受け渡しとエラー時の中断処理を含める
  - _要件: 要件1.1, 要件1.2, 要件1.3_

- [x] 4.3 バックアップ機能の実装
  - 既存データのバックアップ作成と復元機能を実装する
  - タイムスタンプ付きバックアップファイルの管理を含める
  - _要件: 要件1.4_

- [x] 5. エラーハンドリングとログ機能の実装
  - 包括的なエラー処理とログ出力機能を全スクリプトに統合する
  - 詳細なエラー情報と回復手順の提示機能を実装する
  - _要件: 要件7_

- [x] 5.1 統一エラーハンドリング機能の実装
  - 全スクリプトで使用する共通エラーハンドリング関数を作成する
  - エラー分類、ログ記録、ユーザー向けメッセージ表示機能を含める
  - _要件: 要件7.1, 要件7.2_

- [x] 5.2 詳細ログ出力機能の実装
  - 実行ログのファイル出力とローテーション機能を実装する
  - JSON形式の構造化ログと実行サマリー生成を含める
  - _要件: 要件7.1, 要件7.2, 要件7.3, 要件7.4_

- [x] 6. Makefile統合とドキュメント更新
  - Makefileに新しいコマンドを追加し、READMEを更新する
  - 使用方法とトラブルシューティング情報を提供する
  - _要件: 要件1, 要件2, 要件3_

- [x] 6.1 Makefileターゲットの追加
  - make deploy-full, make deploy-data, make deploy-onlyターゲットを追加する
  - 各ターゲットの適切な依存関係と引数渡し機能を含める
  - _要件: 要件1.1, 要件2.1_

- [x] 6.2 READMEドキュメントの更新
  - 新しいワンコマンドデプロイ機能の使用方法をREADMEに追加する
  - コマンド例、オプション説明、トラブルシューティング情報を含める
  - _要件: 要件1, 要件2, 要件3_

- [ ] 7. テストスクリプトと検証機能の実装
  - 各スクリプトの動作を検証するテストスクリプトを作成する
  - エラーシナリオのテストと回復機能の検証を実装する
  - _要件: 要件1, 要件7_

- [x] 7.1 単体テストスクリプトの作成
  - 各ユーティリティスクリプトの動作を検証するテストを作成する
  - 正常系・異常系の両方のテストケースを含める
  - _要件: 要件5, 要件6, 要件7_

- [x] 7.2 統合テストスクリプトの作成
  - 全ワークフローの動作を検証する統合テストを作成する
  - モックデータを使用した安全なテスト環境での実行を含める
  - _要件: 要件1, 要件2, 要件3_

- [ ] 8. パフォーマンス最適化と最終調整
  - 実行時間の最適化と並列処理の実装を行う
  - 全体的な動作確認と最終的な調整を実施する
  - _要件: 要件4, 要件6_

- [ ] 8.1 並列処理機能の実装
  - 可能な処理の並列実行による実行時間短縮を実装する
  - データ収集とファイル操作の最適化を含める
  - _要件: 要件4.1, 要件4.2_

- [ ] 8.2 最終動作確認と調整
  - 全機能の統合テストと実際の環境での動作確認を実施する
  - パフォーマンス測定と必要に応じた最適化を含める
  - _要件: 要件1, 要件2, 要件3, 要件4_