# 要件定義書

## はじめに

AIニュースまとめサイトは、AI関連のニュースを自動収集・要約し、日本語と英語で提供するWebアプリケーションです。Pythonによるデータ処理とNext.jsによるフロントエンドを組み合わせ、静的サイトとして配信します。

## 要件

### 要件1

**ユーザーストーリー:** AI技術に関心のあるユーザーとして、最新のAI関連ニュースを効率的に把握したいので、複数のソースから収集された要約済みニュースを一覧で閲覧できる機能が欲しい

#### 受入基準

1. WHEN ユーザーがトップページにアクセスした時 THEN システムは最新20件のAIニュースを表示する
2. WHEN ニュース項目が表示される時 THEN 各項目にはタイトル、要約、ソース、公開日時、カテゴリが含まれる
3. WHEN ユーザーがニュース項目をクリックした時 THEN 元記事のURLに遷移する
4. IF ニュースが英語ソースの場合 THEN システムは日本語要約を提供する

### 要件2

**ユーザーストーリー:** 多忙なユーザーとして、1日のAI業界の動向を素早く把握したいので、その日の重要なニュースとトレンドをまとめた日次サマリーを閲覧したい

#### 受入基準

1. WHEN ユーザーが日次まとめページにアクセスした時 THEN システムはその日のAIニュースサマリーを表示する
2. WHEN 日次サマリーが表示される時 THEN 記事総数、主要トレンド、重要ニュース、カテゴリ別内訳が含まれる
3. WHEN ユーザーが過去の日付を選択した時 THEN システムは指定日のサマリーを表示する
4. IF その日にニュースがない場合 THEN システムは適切なメッセージを表示する

### 要件3

**ユーザーストーリー:** 日本語ユーザーとして、英語のAI記事も理解したいので、自動翻訳された日本語要約でニュースを読みたい

#### 受入基準

1. WHEN 英語ソースの記事が収集された時 THEN システムは自動的に日本語要約を生成する
2. WHEN 日本語要約が表示される時 THEN 元の英語タイトルも併記される
3. WHEN ユーザーが言語切替ボタンをクリックした時 THEN UIが日本語と英語で切り替わる
4. IF 翻訳処理が失敗した場合 THEN システムは英語のまま表示し、エラーログを記録する

### 要件4

**ユーザーストーリー:** 特定分野に興味のあるユーザーとして、関心のあるカテゴリのニュースだけを見たいので、カテゴリ別にニュースをフィルタリングできる機能が欲しい

#### 受入基準

1. WHEN ユーザーがカテゴリフィルタを選択した時 THEN システムは該当カテゴリのニュースのみを表示する
2. WHEN ニュースが分類される時 THEN システムは「国内」「海外」「Reddit」などのカテゴリに自動分類する
3. WHEN カテゴリフィルタが適用された時 THEN URLにカテゴリパラメータが反映される
4. IF 選択されたカテゴリにニュースがない場合 THEN システムは適切なメッセージを表示する

### 要件5

**ユーザーストーリー:** システム管理者として、ニュースデータを定期的に更新したいので、RSSフィードから自動収集し、AI要約を生成する処理を実行できる機能が必要

#### 受入基準

1. WHEN データ収集処理が実行された時 THEN システムは設定されたRSSソースから記事を取得する
2. WHEN 記事が収集された時 THEN システムは重複記事を検出し除去する
3. WHEN 記事要約が生成される時 THEN システムはClaude APIを使用して200文字以内の要約を作成する
4. WHEN 処理が完了した時 THEN システムは静的JSONファイルとしてデータを出力する
5. IF API制限に達した場合 THEN システムはバッチサイズを調整して処理を継続する

### 要件6

**ユーザーストーリー:** モバイルユーザーとして、スマートフォンでもニュースを快適に閲覧したいので、レスポンシブデザインに対応したUIで利用したい

#### 受入基準

1. WHEN ユーザーがモバイルデバイスでアクセスした時 THEN システムはモバイル最適化されたレイアウトを表示する
2. WHEN 画面サイズが変更された時 THEN システムは適切にレイアウトを調整する
3. WHEN タッチ操作が行われた時 THEN システムは適切に反応する
4. IF 画面幅が768px以下の場合 THEN システムはサイドバーをハンバーガーメニューに変更する

### 要件7

**ユーザーストーリー:** 開発者として、システムを安定運用したいので、エラーハンドリングとログ機能を備えた堅牢なシステムが必要

#### 受入基準

1. WHEN API呼び出しが失敗した時 THEN システムは適切なエラーハンドリングを行い、ログを記録する
2. WHEN データ処理中にエラーが発生した時 THEN システムは処理を継続し、問題のあるデータをスキップする
3. WHEN システムエラーが発生した時 THEN システムは詳細なエラー情報をログファイルに記録する
4. IF 外部APIが利用できない場合 THEN システムは前回のデータを使用して継続運用する